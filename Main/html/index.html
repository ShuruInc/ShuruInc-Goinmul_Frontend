<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>고인물테스트</title>
</head>
<body>
    <div id="topFixedBar" class="top-fixed-bar gradient">
        <nav class="no-js">
            <button class="ranking-icon">
                <img class="ranking-icon">
            </button>        
            <a class="main-top-logo" href="/">
                <img src="/Main/assets/logo/main-logo-h24.svg">
            </a>
            <button class="search-icon">
                <img src="/Main/assets/main-search-icon.svg">
            </button>
        </nav>
    </div>
    <nav class="top-category-buttons">
    </nav>
    <div id="mainContainer" class="main-container">
        <div class="post-board-columns">
        </div class="post-board-columns">
    </div>

    <script>
        let changeOnepiceFlag = true;
        let changeKorFlag = true;
        let insertFlag = true;

        let plaveQuizSection;
        let companyQuizSection;

        var loop = setInterval(() => {
            const allMiddleCategoryName = document.querySelectorAll('section.post-section, h2');
            
            if(allMiddleCategoryName == null) return;

            // 원피스와 한국 애니메이션 텍스트를 찾는 구간
            if(changeKorFlag || changeOnepiceFlag){
                allMiddleCategoryName.forEach((elem) => {
                    if(changeOnepiceFlag && elem.textContent  == "원피스 모의고사"){
                        changeOnepiceFlag = false;
                        elem.textContent = "한국 애니메이션 맞히기 모의고사 "; 
                        // console.log("원피스를 해결");
                    } else if(changeKorFlag && elem.textContent == "한국 애니메이션 맞히기 모의고사"){
                        changeKorFlag = false;
                        //맨 마지막 스페이스 문자로 중복변경 방지                                                                                                                                                                                                                                                                                                                                                   
                        elem.textContent = "원피스 모의고사 ";
                    }
                });
            }

            allMiddleCategoryName.forEach((elem) => {
                if(elem.textContent == "플레이브 모의고사"){
                    plaveQuizSection = elem.parentNode;
                } else if(elem.textContent == "소속사별 모의고사") {
                    companyQuizSection = elem.parentNode;
                }
            });

            if(plaveQuizSection != null && companyQuizSection != null){
                const parent = companyQuizSection.parentNode;
                parent.insertBefore(plaveQuizSection, companyQuizSection);
                insertFlag = false;
            }


            // 모든 수행이 끝나면 루프 삭제
            if(!changeKorFlag && !changeOnepiceFlag && !insertFlag) {
                clearInterval(loop);
            }
        }, 10);
    </script>
</body>
</html>